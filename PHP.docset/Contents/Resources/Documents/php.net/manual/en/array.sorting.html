<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>配列のソート</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="array.constants.html">定義済み定数</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="ref.array.html">配列 関数</a></div>
 <div class="up"><a href="book.array.html">配列</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="array.sorting" class="chapter">
 <h1>配列のソート</h1>

 <p class="para">
  PHP には配列をソートする関数が複数用意されています。
  このページでは、それらの違いについて説明します。
 </p>
 <p class="para">
  主な相違点は次のとおりです。
 </p>
 <p class="para">
  <ul class="simplelist">
   <li class="member">
    配列のキーでソートするものと、値でソートするものがあります。
    <em>$array[&#039;キー&#039;] = &#039;値&#039;;</em>
   </li>
   <li class="member">
    キーと値の相関関係をソート後にも保持するものと保持しないものがあります。
    保持しないものは、ソート後にキーを (0,1,2 ... と) 振りなおします。
   </li>
   <li class="member">
    ソート順による違いがあります。アルファベット順、
    昇順、降順、数値順、自然順、ランダム、ユーザー定義の順などです。
   </li>
   <li class="member">
    注意: ソート関数は、すべて配列自身を直接変更します。
    ソートした配列を新しく作って返すわけではありません。
   </li>
   <li class="member">
    これらのソート関数でふたつのメンバーが等しいと判断されたときの並び順は未定義です
    (ソート結果は場合によって変わる可能性があります)。
   </li>
  </ul>
 </p>
 <p class="para">
  <table class="doctable table">
   <caption><strong>ソート関数の特性</strong></caption>
   
    <thead>
     <tr>
      <th>関数名</th>
      <th>ソートの基準</th>
      <th>キーと値の相関関係</th>
      <th>ソート順</th>
      <th>関連する関数</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><span class="function"><a href="function.array-multisort.html" class="function">array_multisort()</a></span></td>
      <td>値</td>
      <td>連想配列の場合は維持し、数値添字配列の場合は維持しない</td>
      <td>最初の配列、あるいはソートオプション</td>
      <td><span class="function"><a href="function.array-walk.html" class="function">array_walk()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.asort.html" class="function">asort()</a></span></td>
      <td>値</td>
      <td>維持する</td>
      <td>昇順</td>
      <td><span class="function"><a href="function.arsort.html" class="function">arsort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.arsort.html" class="function">arsort()</a></span></td>
      <td>値</td>
      <td>維持する</td>
      <td>降順</td>
      <td><span class="function"><a href="function.asort.html" class="function">asort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.krsort.html" class="function">krsort()</a></span></td>
      <td>キー</td>
      <td>維持する</td>
      <td>降順</td>
      <td><span class="function"><a href="function.ksort.html" class="function">ksort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.ksort.html" class="function">ksort()</a></span></td>
      <td>キー</td>
      <td>維持する</td>
      <td>昇順</td>
      <td><span class="function"><a href="function.asort.html" class="function">asort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.natcasesort.html" class="function">natcasesort()</a></span></td>
      <td>値</td>
      <td>維持する</td>
      <td>大文字小文字を区別しない自然順</td>
      <td><span class="function"><a href="function.natsort.html" class="function">natsort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.natsort.html" class="function">natsort()</a></span></td>
      <td>値</td>
      <td>維持する</td>
      <td>自然順</td>
      <td><span class="function"><a href="function.natcasesort.html" class="function">natcasesort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.rsort.html" class="function">rsort()</a></span></td>
      <td>値</td>
      <td>維持しない</td>
      <td>降順</td>
      <td><span class="function"><a href="function.sort.html" class="function">sort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.shuffle.html" class="function">shuffle()</a></span></td>
      <td>値</td>
      <td>維持しない</td>
      <td>ランダム</td>
      <td><span class="function"><a href="function.array-rand.html" class="function">array_rand()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.sort.html" class="function">sort()</a></span></td>
      <td>値</td>
      <td>維持しない</td>
      <td>昇順</td>
      <td><span class="function"><a href="function.rsort.html" class="function">rsort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.uasort.html" class="function">uasort()</a></span></td>
      <td>値</td>
      <td>維持する</td>
      <td>ユーザー定義</td>
      <td><span class="function"><a href="function.uksort.html" class="function">uksort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.uksort.html" class="function">uksort()</a></span></td>
      <td>キー</td>
      <td>維持する</td>
      <td>ユーザー定義</td>
      <td><span class="function"><a href="function.uasort.html" class="function">uasort()</a></span></td>
     </tr>

     <tr>
      <td><span class="function"><a href="function.usort.html" class="function">usort()</a></span></td>
      <td>値</td>
      <td>維持しない</td>
      <td>ユーザー定義</td>
      <td><span class="function"><a href="function.uasort.html" class="function">uasort()</a></span></td>
     </tr>

    </tbody>
   
  </table>

 </p>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119944""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#119944" class="date">25-Sep-2016 07:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Stabilizing the sort functions (in this case, usort).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">stable_usort</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$cmp</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$elt</span><span class="keyword">)use(&amp;</span><span class="default">$i</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return [</span><span class="default">$i</span><span class="keyword">++, </span><span class="default">$elt</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }, </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)use(</span><span class="default">$cmp</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$cmp</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) ?: (</span><span class="default">$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] - </span><span class="default">$b</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; });<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_column</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
} <br />
</span><span class="default">?&gt;<br />
</span><br />
Tags each array element with its original position in the array so that when the comparison function returns 0 the tie can be broken to put the earlier element first.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117532""></a>
  <div class="note">
   <strong class="user">monicse09ku at yahoo dot com</strong>
   <a href="#117532" class="date">25-Jun-2015 03:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// takes an array and desired key value and returns an array<br />
// searches through an array for a given key, if found the key that row is made the first row and the other rows are inserted accordingly.<br />
// the facility of this function is to get the value with a specific key of an array as the first value.<br />
<br />
/////////////////////////////// function starts //////////////////////////////<br />
<br />
function dksort($array, $case){<br />
&nbsp;&nbsp;&nbsp; if(array_key_exists($case,$array)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $a[$case] = $array[$case];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($array as $key=&gt;$val){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($case==$key){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $a[$key] = $array[$key];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return $a;<br />
}<br />
<br />
$d = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '22'=&gt;'jdfhgjfd',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '33'=&gt;'jdfhgjfd',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '11'=&gt;'jrtyrjfd',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '55'=&gt;'jrtydairjfd',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '77'=&gt;'jopo',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '99'=&gt;'jrtasajfd',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '44'=&gt;'jopasdwo',<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; '88'=&gt;'hdgatyuyuiuy'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );<br />
<br />
$c = dksort($d, '55');<br />
print_r($c);<br />
<br />
////////////////////////// function ends ////////////////////////////////////////</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117516""></a>
  <div class="note">
   <strong class="user">Mssler</strong>
   <a href="#117516" class="date">23-Jun-2015 06:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
simple example sorting dotted version numbers<br />
<br />
&nbsp;&nbsp; &nbsp; function sortByVersionnumber($a,$b){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $ta=explode(".",$a); $tb=explode(".",$b);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; foreach ($ta as $k =&gt; $v){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset($tb[$k])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($ta[$k] &gt; $tb[$k]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif($ta[$k] &lt; $tb[$k]) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return 0;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; function vnksort(&amp;$array){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; uksort($array ,"sortByVersionnumber");<br />
&nbsp;&nbsp; &nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112221""></a>
  <div class="note">
   <strong class="user">&amp;#34;Matthew Rice&amp;#34;</strong>
   <a href="#112221" class="date">18-May-2013 05:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While this may seem obvious, user-defined array sorting functions ( uksort(), uasort(), usort() ) will *not* be called if the array does not have *at least two values in it*.<br />
<br />
The following code:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">usortTest</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$test </span><span class="keyword">= array(</span><span class="string">'val1'</span><span class="keyword">);<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, </span><span class="string">"usortTest"</span><span class="keyword">);<br />
<br />
</span><span class="default">$test2 </span><span class="keyword">= array(</span><span class="string">'val2'</span><span class="keyword">, </span><span class="string">'val3'</span><span class="keyword">);<br />
</span><span class="default">usort</span><span class="keyword">(</span><span class="default">$test2</span><span class="keyword">, </span><span class="string">"usortTest"</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Will output: <br />
<br />
string(4) "val3"<br />
string(4) "val2"<br />
<br />
The first array doesn't get sent to the function.<br />
<br />
Please, under no circumstance, place any logic that modifies values, or applies non-sorting business logic in these functions as they will not always be executed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102888""></a>
  <div class="note">
   <strong class="user">oculiz at gmail dot com</strong>
   <a href="#102888" class="date">12-Mar-2011 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another way to do a case case-insensitive sort by key would simply be:<br />
<br />
<span class="default">&lt;?php<br />
uksort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'strcasecmp'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Since strcasecmp is already predefined in php it saves you the trouble to actually write the comparison function yourself.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="array.constants.html">定義済み定数</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="ref.array.html">配列 関数</a></div>
 <div class="up"><a href="book.array.html">配列</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
