<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>すべてのサブツリーを飛ばして、次のノードにカーソルを移動する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="xmlreader.movetonextattribute.html">XMLReader::moveToNextAttribute</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="xmlreader.open.html">XMLReader::open</a></div>
 <div class="up"><a href="class.xmlreader.html">XMLReader</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="xmlreader.next" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">XMLReader::next</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7)</p><p class="refpurpose"><span class="refname">XMLReader::next</span> &mdash; <span class="dc-title">すべてのサブツリーを飛ばして、次のノードにカーソルを移動する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-xmlreader.next-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><strong>XMLReader::next</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$localname</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   すべてのサブツリーを飛ばして、カーソルを次のノードに移動します。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-xmlreader.next-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">localname</code></dt>

     <dd>

      <p class="para">
       移動先のノードの名前。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-xmlreader.next-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-xmlreader.next-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="methodname"><a href="xmlreader.movetonextattribute.html" class="methodname" rel="rdfs-seeAlso">XMLReader::moveToNextAttribute()</a> - 次の属性にカーソルを移動する</span></li>
    <li class="member"><span class="methodname"><a href="xmlreader.movetoelement.html" class="methodname" rel="rdfs-seeAlso">XMLReader::moveToElement()</a> - 現在の属性の親要素にカーソルを移動する</span></li>
    <li class="member"><span class="methodname"><a href="xmlreader.movetoattribute.html" class="methodname" rel="rdfs-seeAlso">XMLReader::moveToAttribute()</a> - 指定した名前の属性にカーソルを移動する</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="117959""></a>
  <div class="note">
   <strong class="user">ppp dot BOTSNEEDNOTAPPLY at salesfloor dot net</strong>
   <a href="#117959" class="date">09-Sep-2015 06:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This method appears to follow these rules:<br />
<br />
&nbsp;- if $localName names a sibling node, the cursor is moved to that node;<br />
&nbsp;- if $localName names an ancestor node, the cursor is moved to the end of that node;<br />
&nbsp;- if $localName names a node that is a sibling of any of the current node's ancestors, the cursor is moved to that node;<br />
&nbsp;- otherwise the cursor is moved outside the document.<br />
<br />
Note especially that this method never moves the cursor to child nodes.<br />
<br />
For example, given this XML document<br />
<br />
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />
&lt;root id="root" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" rel="nofollow" target="_blank">http://www.w3.org/2001/XMLSchema-instance</a>"&gt;<br />
&nbsp; &lt;aaa id="1"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;bbb id="1.1"&gt;&lt;/bbb&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;bbb id="1.2"&gt;&lt;/bbb&gt;<br />
&nbsp; &lt;/aaa&gt;<br />
&nbsp; &lt;ccc id="2" /&gt;<br />
&nbsp; &lt;aaa id="3"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;ddd id="3.1"&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;aaa id="3.1.1"&gt;&lt;/aaa&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/ddd&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;aaa id="3.2"&gt;&lt;/aaa&gt;<br />
&nbsp; &lt;/aaa&gt;<br />
&nbsp; &lt;aaa id="4"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;eee id="4.1"&gt;&lt;/eee&gt;<br />
&nbsp; &lt;/aaa&gt;<br />
&lt;/root&gt;<br />
<br />
going from &lt;root id="root"&gt; to "bbb" places the cursor outside the document;<br />
going from &lt;aaa id="1"&gt; to "bbb" places the cursor outside the document;<br />
going from &lt;aaa id="1"&gt; to "aaa" places the cursor on &lt;aaa id="3"&gt;;<br />
going from &lt;bbb id="1.1"&gt; to "bbb" places the cursor on &lt;bbb id="1.2"&gt;;<br />
going from &lt;bbb id="1.2"&gt; to "bbb" places the cursor outside the document;<br />
going from &lt;bbb id="1.1"&gt; to "ddd" places the cursor outside the document;<br />
going from &lt;bbb id="1.1"&gt; to "aaa" places the cursor on &lt;/aaa&gt;;<br />
going from &lt;bbb id="1.1"&gt; to "ccc" places the cursor on &lt;ccc id="2"&gt;;<br />
going from &lt;bbb id="1.1"&gt; to "nonsuch" places the cursor outside the document;<br />
going from &lt;bbb id="1.1"&gt; to "root" places the cursor on &lt;/root&gt;;<br />
going from &lt;ddd id="3.1"&gt; to "aaa" places the cursor on &lt;aaa id="3.2"&gt;;<br />
going from &lt;ddd id="3.1"&gt; to "eee" places the cursor outside the document;<br />
<br />
Try it yourself:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$document </span><span class="keyword">= &lt;&lt;&lt;XML<br />
</span><span class="string">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />
&lt;root id="root" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" rel="nofollow" target="_blank">http://www.w3.org/2001/XMLSchema-instance</a>"&gt;<br />
&nbsp; &lt;aaa id="1"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;bbb id="1.1"&gt;&lt;/bbb&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;bbb id="1.2"&gt;&lt;/bbb&gt;<br />
&nbsp; &lt;/aaa&gt;<br />
&nbsp; &lt;ccc id="2" /&gt;<br />
&nbsp; &lt;aaa id="3"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;ddd id="3.1"&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;aaa id="3.1.1"&gt;&lt;/aaa&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/ddd&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;aaa id="3.2"&gt;&lt;/aaa&gt;<br />
&nbsp; &lt;/aaa&gt;<br />
&nbsp; &lt;aaa id="4"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;eee id="4.1"&gt;&lt;/eee&gt;<br />
&nbsp; &lt;/aaa&gt;<br />
&lt;/root&gt;<br />
</span><span class="keyword">XML;<br />
<br />
</span><span class="default">$filename </span><span class="keyword">= </span><span class="string">"/tmp/xmlreader.php.xml"</span><span class="keyword">;<br />
</span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$document</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"given this XML document\n\n</span><span class="default">$document</span><span class="string">\n\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"root"</span><span class="keyword">, </span><span class="string">"bbb"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"1"</span><span class="keyword">, </span><span class="string">"bbb"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"1"</span><span class="keyword">, </span><span class="string">"aaa"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"1.1"</span><span class="keyword">, </span><span class="string">"bbb"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"1.2"</span><span class="keyword">, </span><span class="string">"bbb"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"1.1"</span><span class="keyword">, </span><span class="string">"ddd"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"1.1"</span><span class="keyword">, </span><span class="string">"aaa"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"1.1"</span><span class="keyword">, </span><span class="string">"ccc"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"1.1"</span><span class="keyword">, </span><span class="string">"nonsuch"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"1.1"</span><span class="keyword">, </span><span class="string">"root"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"3.1"</span><span class="keyword">, </span><span class="string">"aaa"</span><span class="keyword">);<br />
</span><span class="default">showNext</span><span class="keyword">(</span><span class="string">"3.1"</span><span class="keyword">, </span><span class="string">"eee"</span><span class="keyword">);<br />
<br />
function </span><span class="default">showNext</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">, </span><span class="default">$to</span><span class="keyword">) {<br />
&nbsp; global </span><span class="default">$filename</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$xml </span><span class="keyword">= new \</span><span class="default">XmlReader</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">(</span><span class="string">"file://</span><span class="default">$filename</span><span class="string">"</span><span class="keyword">);<br />
&nbsp; while (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">=== \</span><span class="default">XmlReader</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">"id"</span><span class="keyword">) == </span><span class="default">$from</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"going from &lt;</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="string"> id=\"</span><span class="default">$from</span><span class="string">\"&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">(</span><span class="default">$to</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$destination </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp; if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">=== \</span><span class="default">XmlReader</span><span class="keyword">::</span><span class="default">NONE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$destination </span><span class="keyword">= </span><span class="string">"outside the document"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; if(!</span><span class="default">$destination</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">=== \</span><span class="default">XmlReader</span><span class="keyword">::</span><span class="default">END_ELEMENT</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$destination </span><span class="keyword">= </span><span class="string">"on &lt;/</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="string">&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else if (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">=== \</span><span class="default">XmlReader</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$destination </span><span class="keyword">= </span><span class="string">"on &lt;</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="string"> id=\"" </span><span class="keyword">. </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">"id"</span><span class="keyword">) . </span><span class="string">"\"&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; echo </span><span class="string">" to \"</span><span class="default">$to</span><span class="string">\" places the cursor </span><span class="default">$destination</span><span class="string">;\n"</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117273""></a>
  <div class="note">
   <strong class="user">gholson19 at gmail dot com</strong>
   <a href="#117273" class="date">14-May-2015 06:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To skip over deletion nodes in the xml extracted from a word document, do something like this:<br />
<br />
if ($paragraph-&gt;nodeType == XMLREADER::ELEMENT &amp;&amp; $paragraph-&gt;name === 'w:del'){$paragraph-&gt;next();}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="xmlreader.movetonextattribute.html">XMLReader::moveToNextAttribute</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="xmlreader.open.html">XMLReader::open</a></div>
 <div class="up"><a href="class.xmlreader.html">XMLReader</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
