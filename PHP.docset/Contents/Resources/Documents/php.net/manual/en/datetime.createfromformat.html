<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>指定した書式で時刻文字列をパースする</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="datetime.construct.html">DateTime::__construct</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="datetime.getlasterrors.html">DateTime::getLastErrors</a></div>
 <div class="up"><a href="class.datetime.html">DateTime</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="datetime.createfromformat" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DateTime::createFromFormat</h1>
  <h1 class="refname">date_create_from_format</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7)</p><p class="refpurpose"><span class="refname">DateTime::createFromFormat</span> -- <span class="refname">date_create_from_format</span> &mdash; <span class="dc-title">指定した書式で時刻文字列をパースする</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-datetime.createfromformat-description">
  <h3 class="title">説明</h3>
  <p class="para">オブジェクト指向型</p>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <span class="methodname"><strong>DateTime::createFromFormat</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$time</code></span>
   [, <span class="methodparam"><span class="type"><a href="class.datetimezone.html" class="type DateTimeZone">DateTimeZone</a></span> <code class="parameter">$timezone</code></span>
  ] )</div>

  <p class="para rdfs-comment">手続き型</p>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <span class="methodname"><a href="function.date-create-from-format.html" class="methodname">date_create_from_format</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$time</code></span>
   [, <span class="methodparam"><span class="type"><a href="class.datetimezone.html" class="type DateTimeZone">DateTimeZone</a></span> <code class="parameter">$timezone</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   新しい DateTime オブジェクトを返します。
   このオブジェクトは、<code class="parameter">time</code> で指定した文字列を
   <code class="parameter">format</code> で指定した書式に沿って解釈した時刻を表します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-datetime.createfromformat-parameters">
  <h3 class="title">パラメータ</h3>
  <dl>

   
    <dt>
<code class="parameter">format</code></dt>

    <dd>

     <p class="para">
      書式を文字列で渡します。以下の書式オプションを参照ください。
      大半は、<span class="function"><a href="function.date.html" class="function">date()</a></span> で使える文字と同じです。
     </p>
     <p class="para">
      <table class="doctable table">
       <caption><strong><code class="parameter">format</code> パラメータに渡せる文字</strong></caption>
       
        <thead>
         <tr>
          <th><code class="parameter">format</code> 文字</th>
          <th>説明</th>
          <th>取りうる値の例</th>
         </tr>

        </thead>

        <tbody class="tbody">
         <tr>
          <td style="text-align: center;"><em class="emphasis">日</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><em>d</em> および <em>j</em></td>
          <td>2桁の日付。先頭のゼロを含むものと含まないもの</td>
          <td>
           <em>01</em> から <em>31</em> あるいは
           <em>1</em> から <em>31</em>
          </td>
         </tr>

         <tr>
          <td><em>D</em> および <em>l</em></td>
          <td>曜日を表す文字列</td>
          <td>
           <em>Mon</em> から <em>Sun</em> あるいは
           <em>Sunday</em> から <em>Saturday</em>
          </td>
         </tr>

         <tr>
          <td><em>S</em></td>
          <td>日付の後につける英語の接尾辞。二文字。処理中には無視されます。</td>
          <td>
           <em>st</em>、<em>nd</em>、<em>rd</em> あるいは
           <em>th</em>
          </td>
         </tr>

         <tr>
          <td><em>z</em></td>
          <td>年始からの通算日数 (最初は 0)</td>
          <td><em>0</em> から <em>365</em></td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">月</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><em>F</em> および <em>M</em></td>
          <td>月を表す文字列。January あるいは Sept など</td>
          <td>
           <em>January</em> から <em>December</em> あるいは
           <em>Jan</em> から <em>Dec</em>
          </td>
         </tr>

         <tr>
          <td><em>m</em> および <em>n</em></td>
          <td>月を表す数値。先頭のゼロを含むものと含まないもの</td>
          <td>
           <em>01</em> から <em>12</em> あるいは
           <em>1</em> から <em>12</em>
          </td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">年</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><em>Y</em></td>
          <td>4 桁の数値で表した年</td>
          <td>例: <em>1999</em> あるいは <em>2003</em></td>
         </tr>

         <tr>
          <td><em>y</em></td>
          <td>
           2 桁の数値で表した年 (1970年から2069年の間だとみなされます)
          </td>
          <td>
           例:
           <em>99</em> あるいは <em>03</em>
           (それぞれ、 <em>1999</em> および
           <em>2003</em> と見なされます)
          </td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">時刻</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><em>a</em> および <em>A</em></td>
          <td>午前および午後</td>
          <td><em>am</em> あるいは <em>pm</em></td>
         </tr>

         <tr>
          <td><em>g</em> および <em>h</em></td>
          <td>12 時間制での時間。先頭のゼロを含むものと含まないもの</td>
          <td>
           <em>1</em> から <em>12</em> あるいは
           <em>01</em> から <em>12</em>
          </td>
         </tr>

         <tr>
          <td><em>G</em> and <em>H</em></td>
          <td>24 時間制での時間。先頭のゼロを含むものと含まないもの</td>
          <td>
           <em>0</em> から <em>23</em> あるいは
           <em>00</em> から <em>23</em>
          </td>
         </tr>

         <tr>
          <td><em>i</em></td>
          <td>分。先頭のゼロを含む</td>
          <td><em>00</em> から <em>59</em></td>
         </tr>

         <tr>
          <td><em>s</em></td>
          <td>秒。先頭のゼロを含む</td>
          <td><em>00</em> から <em>59</em></td>
         </tr>

         <tr>
          <td><em>u</em></td>
          <td>マイクロ秒 (最大 6 桁)</td>
          <td>例: <em>45</em>, <em>654321</em></td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">タイムゾーン</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td>
           <em>e</em>、<em>O</em>、
           <em>P</em> および <em>T</em>
          </td>
          <td>タイムゾーン識別子、UTC からの時差 (時間単位)、
          UTC からの時差 (コロン区切りでの時間と分)、そしてタイムゾーンの短縮形</td>
          <td>例: <em>UTC</em>、<em>GMT</em>、
           <em>Atlantic/Azores</em> あるいは
           <em>+0200</em> あるいは <em>+02:00</em> あるいは
           <em>EST</em>、<em>MDT</em>
          </td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">完全な日付/時刻</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><em>U</em></td>
          <td>Unix エポック (January 1 1970 00:00:00 GMT) からの経過秒数</td>
          <td>例: <em>1292177455</em></td>
         </tr>

         <tr>
          <td style="text-align: center;"><em class="emphasis">空白および区切り</em></td>
          <td>---</td>
          <td>---</td>
         </tr>

         <tr>
          <td><em> </em> (空白)</td>
          <td>空白 1 文字あるいはタブ 1 文字</td>
          <td>例: <em> </em></td>
         </tr>

         <tr>
          <td><em>#</em></td>
          <td>
           次の区切り文字のいずれか: <em>;</em>,
           <em>:</em>, <em>/</em>, <em>.</em>,
           <em>,</em>, <em>-</em>, <em>(</em> あるいは
           <em>)</em>
          </td>
          <td>例: <em>/</em></td>
         </tr>

         <tr>
          <td>
           <em>;</em>,
           <em>:</em>, <em>/</em>, <em>.</em>,
           <em>,</em>, <em>-</em>, <em>(</em> あるいは
           <em>)</em>
          </td>
          <td>指定した文字</td>
          <td>例: <em>-</em></td>
         </tr>

         <tr>
          <td><em>?</em></td>
          <td>ランダムなバイト</td>
          <td>例: <em>^</em> (UTF-8 文字の場合は複数の
          <em>?</em> が必要になるでしょう。この場合、おそらく
          <em>*</em> を使うと要望が満たせるはずです)</td>
         </tr>

         <tr>
          <td><em>*</em></td>
          <td>次の区切り文字あるいは数字までのランダムなバイト列</td>
          <td>例: <em>Y-*-d</em> の中の <em>*</em>
          は、文字列 <em>2009-aWord-08</em> の中の
          <em>aWord</em> にマッチします</td>
         </tr>

         <tr>
          <td><em>!</em></td>
          <td>すべてのフィールド (年、月、日、時、分、秒、マイクロ秒およびタイムゾーン情報)
          を Unix エポックにリセットする</td>
          <td><em>!</em> がなければ、すべてのフィールドは現在の日時に設定されます。</td>
         </tr>

         <tr>
          <td><em>|</em></td>
          <td>まだパースされていないすべてのフィールド (年、月、日、時、分、秒、マイクロ秒およびタイムゾーン情報)
          を Unix エポックにリセットする</td>
          <td><em>Y-m-d|</em> は、文字列をパースした結果から年月日を設定し
          時分秒には 0 を設定します。</td>
         </tr>

         <tr>
          <td><em>+</em></td>
          <td>この文字があると、文字列のそれ以降のデータではエラーが発生せず、
          かわりに警告を発生させる</td>
          <td>それ以降のデータが存在したかどうかを調べるには <span class="methodname"><a href="datetime.getlasterrors.html" class="methodname">DateTime::getLastErrors()</a></span>
          を使います。</td>
         </tr>

        </tbody>
       
      </table>

     </p>
     <p class="para">
      書式文字列の中に解釈不能な文字が含まれていると処理は失敗し、
      返り値にはエラーメッセージが付加されます。エラーメッセージを調べるには
      <span class="methodname"><a href="datetime.getlasterrors.html" class="methodname">DateTime::getLastErrors()</a></span> を使います。
     </p>
     <p class="para">
      <code class="parameter">format</code> にリテラル文字を含めるには、
      バックスラッシュ (<em>\</em>) でエスケープする必要があります。
     </p>
     <p class="para">
      <code class="parameter">format</code> に文字
      <em>!</em> が含まれない場合は、作成した時刻値のうち
      <code class="parameter">format</code> で指定されていない部分を
      現在のシステム時刻で初期化します。
     </p>
     <p class="para">
      <code class="parameter">format</code> に文字
      <em>!</em> が含まれる場合は、作成した時刻値のうち
      <code class="parameter">format</code> で指定されていない部分と
      <em>!</em> の左側の部分を
      Unix エポックの対応する箇所の値で初期化します。
     </p>
     <p class="para">
      Unix エポックは 1970-01-01 00:00:00 です。
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">time</code></dt>

    <dd>

     <p class="para">
      時刻を表す文字列。
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">timezone</code></dt>

    <dd>

     <p class="para">
      指定したいタイムゾーンを表す
      <a href="class.datetimezone.html" class="classname">DateTimeZone</a> オブジェクト。
     </p>
     <p class="para">
      <code class="parameter">timezone</code> を省略し、かつ
      <code class="parameter">time</code> にタイムゾーンが含まれない場合は、
      現在のタイムゾーンを使います。
     </p>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">
       <code class="parameter">time</code> パラメータが UNIX タイムスタンプ
       (例: <em>946684800</em>) だったりタイムゾーンを含んでいたり
       (例: <em>2010-01-28T15:00:00+02:00</em>)
       する場合は、
       <code class="parameter">timezone</code> パラメータや現在のタイムゾーンは無視します。
      </p>
     </p></blockquote>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-datetime.createfromformat-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   新しい DateTime のインスタンス、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-datetime.createfromformat-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.9</td>
       <td>
        書式文字列 + が追加されました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-datetime.createfromformat-examples">
  <h3 class="title">例</h3>
  <div class="example" id="example-2522">
   <p><strong>例1 <span class="function"><strong>DateTime::createFromFormat()</strong></span> の例</strong></p>
   <div class="example-contents"><p>オブジェクト指向型</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #DD0000">'j-M-Y'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'15-Feb-2009'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>手続き型</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_create_from_format</span><span style="color: #007700">(</span><span style="color: #DD0000">'j-M-Y'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'15-Feb-2009'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">date_format</span><span style="color: #007700">(</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
2009-02-15
</pre></div>
   </div>
  </div>
  <div class="example" id="example-2523">
   <p><strong>例2 <span class="function"><strong>DateTime::createFromFormat()</strong></span> の複雑な例</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Current&nbsp;time:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'2009-02-15'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Format:&nbsp;</span><span style="color: #0000BB">$format</span><span style="color: #DD0000">;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'2009-02-15&nbsp;15:16:17'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Format:&nbsp;</span><span style="color: #0000BB">$format</span><span style="color: #DD0000">;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Y-m-!d&nbsp;H:i:s'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'2009-02-15&nbsp;15:16:17'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Format:&nbsp;</span><span style="color: #0000BB">$format</span><span style="color: #DD0000">;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$format&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'!d'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #0000BB">$format</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'15'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Format:&nbsp;</span><span style="color: #0000BB">$format</span><span style="color: #DD0000">;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>上の例の出力は、
たとえば以下のようになります。</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
Current time: 2010-04-23 10:29:35
Format: Y-m-d; 2009-02-15 10:29:35
Format: Y-m-d H:i:s; 2009-02-15 15:16:17
Format: Y-m-!d H:i:s; 1970-01-15 15:16:17
Format: !d; 1970-01-15 00:00:00
</pre></div>
   </div>
  </div>
  <div class="example" id="example-2524">
   <p><strong>例3 リテラル文字を含む書式文字列</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">::</span><span style="color: #0000BB">createFromFormat</span><span style="color: #007700">(</span><span style="color: #DD0000">'H\h&nbsp;i\m&nbsp;s\s'</span><span style="color: #007700">,</span><span style="color: #DD0000">'23h&nbsp;15m&nbsp;03s'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'H:i:s'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>上の例の出力は、
たとえば以下のようになります。</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
23:15:03
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-datetime.createfromformat-seealso">
  <h3 class="title">参考</h3>
  <ul class="simplelist">
   <li class="member"><span class="function"><a href="datetime.construct.html" class="function" rel="rdfs-seeAlso">DateTime::__construct()</a> - 新しい DateTime オブジェクトを返す</span></li>
   <li class="member"><span class="function"><a href="datetime.getlasterrors.html" class="function" rel="rdfs-seeAlso">DateTime::getLastErrors()</a> - 警告およびエラーを返す</span></li>
   <li class="member"><span class="function"><a href="function.checkdate.html" class="function" rel="rdfs-seeAlso">checkdate()</a> - グレゴリオ暦の日付/時刻の妥当性を確認します</span></li>
   <li class="member"><span class="function"><a href="function.strptime.html" class="function" rel="rdfs-seeAlso">strptime()</a> - strftime が生成した日付/時刻をパースする</span></li>
  </ul>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="121431""></a>
  <div class="note">
   <strong class="user">Fabian</strong>
   <a href="#121431" class="date">25-Jul-2017 11:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Parsing RFC3339 strings can be very tricky when their are microseconds in the date string.<br />
<br />
Since PHP 7 there is the undocumented constant DateTime::RFC3339_EXTENDED (value: Y-m-d\TH:i:s.vP), which can be used to output an RFC3339 string with microseconds:<br />
<br />
<span class="default">&lt;?php<br />
$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">RFC3339_EXTENDED</span><span class="keyword">)); </span><span class="comment">// 2017-07-25T13:47:12.000+00:00<br />
</span><span class="default">?&gt;<br />
</span><br />
But the same constant can't be used for parsing an RFC3339 string with microseconds, instead do:<br />
<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d\TH:i:s.uP"</span><span class="keyword">, </span><span class="string">"2017-07-25T15:25:16.123456+02:00"</span><span class="keyword">)<br />
</span><span class="default">?&gt;<br />
</span><br />
But "u" can only parse microseconds up to 6 digits, but some language (like Go) return more than 6 digits for the microseconds, e.g.: "2017-07-25T15:50:42.456430712+02:00" (when turning time.Time to JSON with json.Marshal()). Currently there is no other solution than using a separate parsing library to get correct dates.<br />
<br />
Note: the difference between "v" and "u" is just 3 digits vs. 6 digits.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120552""></a>
  <div class="note">
   <strong class="user">thflori</strong>
   <a href="#120552" class="date">30-Jan-2017 05:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
createFromFormat('U') has a strange behaviour: it ignores the datetimezone and the resulting DateTime object will always have GMT+0000 timezone.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$dt </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'U'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">(), new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">'CET'</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s (T)'</span><span class="keyword">), </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s (T)'</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The problem is microtime() and time() returning the timestamp in current timezone.&nbsp; Instead of using time you can use 'now' but to get a DateTimeObject with microseconds you have to write it this way to be sure to get the correct datetime:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$dt </span><span class="keyword">= \</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'U.u'</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">))-&gt;</span><span class="default">setTimezone</span><span class="keyword">(new \</span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">'T'</span><span class="keyword">)));<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120475""></a>
  <div class="note">
   <strong class="user">joereynolds952 at gmail dot com</strong>
   <a href="#120475" class="date">17-Jan-2017 08:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a note that it is possible to call createFromFormat non statically.<br />
<br />
<span class="default">&lt;?php<br />
$today </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$today</span><span class="keyword">-&gt;</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2016-11-04'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Is perfectly valid.<br />
<br />
We had to do this once we started using PHPMD which would complain about static methods.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120343""></a>
  <div class="note">
   <strong class="user">vijaycs85 at gmail dot com</strong>
   <a href="#120343" class="date">16-Dec-2016 09:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is no option to specify date format 'c' (e.g. 2004-02-12T15:19:21+00:00) directly. work around is to use Y-m-d\TH:i:sT</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120046""></a>
  <div class="note">
   <strong class="user">rasmus at mindplay dot dk</strong>
   <a href="#120046" class="date">14-Oct-2016 09:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note a weird and surprising inconsistency in `DateTime::createFromFormat()` and `DateTimeImmutable::createFromFormat()` when the format is `"U"` and these factory-functions are called with a Unix timestamp - in this case, the timezone argument is not only ignored (as per the documentation) but also *NOT APPLIED* the constructed object!<br />
<br />
In other words, the timezone argument has no effect in this case, at all, which I found pretty surprising. Of course the timezone argument cannot be used in this case to parse the value, since it's a timezone-neutral Unix timestamp, but I was definitely expecting the factory-function to apply the specified timezone to the created object - this is especially surprising when it comes to `DateTimeImmutable`, since this behavior of the factory-function makes it impossible to create an instance from a timestamp and initialize the timezone with a single call; you will need a subsequent call to `setTimezone()` discarding the original object.<br />
<br />
Very strange and confusing design :-*</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119362""></a>
  <div class="note">
   <strong class="user">lsloan-php dot net at umich dot edu</strong>
   <a href="#119362" class="date">21-May-2016 04:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Reportedly, microtime() may return a timestamp number without a fractional part if the microseconds are exactly zero.&nbsp; I.e., "1463772747" instead of the expected "1463772747.000000".&nbsp; number_format() can create a correct string representation of the microsecond timestamp every time, which can be useful for creating DateTime objects when used with DateTime::createFromFormat():<br />
<br />
<span class="default">&lt;?php<br />
$now </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'U.u'</span><span class="keyword">, </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">), </span><span class="default">6</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$now</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s.u'</span><span class="keyword">)); </span><span class="comment">// E.g., string(26) "2016-05-20 19:36:26.900794"</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119225""></a>
  <div class="note">
   <strong class="user">tuxedobob</strong>
   <a href="#119225" class="date">22-Apr-2016 04:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're here because you're trying to create a date from a week number, you want to be using setISODate, as I discovered here:<br />
<br />
<a href="http://www.lornajane.net/posts/2011/getting-dates-from-week-numbers-in-php" rel="nofollow" target="_blank">http://www.lornajane.net/posts/2011/getting-dates-from-week-numbers-in-php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118358""></a>
  <div class="note">
   <strong class="user">Albie at aveit dot org</strong>
   <a href="#118358" class="date">23-Nov-2015 03:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to safely compare equality of a DateTime object without explicitly providing the time portion make use of the ! format character.<br />
<br />
<span class="default">&lt;?php<br />
$date1 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'!Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">sleep</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'!Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="comment">/* <br />
&nbsp;$date1 and $date2 will both be set to a timestamp of "2012-10-17 00:00:00"<br />
&nbsp;var_dump($date1 == $date2); //will be true<br />
&nbsp;var_dump($date1 &gt; $date2); //will be false<br />
&nbsp;var_dump($date1 &lt; $date2); //will be false<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
If you omit the ! format character without explicitly providing the time portion your timestamp which will include the current system time in the stamp.<br />
<br />
<span class="default">&lt;?php<br />
$date1 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">sleep</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">== </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">&gt;= </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">&lt; </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be true<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118341""></a>
  <div class="note">
   <strong class="user">chernomyrdin at gmail dot com</strong>
   <a href="#118341" class="date">19-Nov-2015 08:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'U.u'</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s.u'</span><span class="keyword">)); <br />
</span><span class="default">?&gt;<br />
</span>will print: 2015-11-19 11:37:29.125300 (the current time with microseconds)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117462""></a>
  <div class="note">
   <strong class="user">jplevene</strong>
   <a href="#117462" class="date">13-Jun-2015 12:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To convert an email header date use the following (important, notice the * at the end)<br />
<br />
$date = DateTime::createFromFormat('D, d M Y H:i:s O *', $email_date);<br />
<br />
Some dates in email headers can be formatted as:<br />
Fri, 12 Jun 2015 13:53:37 +0000 (UTC)<br />
<br />
The "(UTC)" at the end of the date causes an error and will return a result of false unless the * is at the end.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116624""></a>
  <div class="note">
   <strong class="user">SeliusX</strong>
   <a href="#116624" class="date">30-Jan-2015 11:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Creating timestamps to the day can result in hidden bugs cause hours are taken from now:<br />
<br />
Example:<br />
$newDateTime = DateTime::createFromFormat('Y-m-d', '2014-12-10');<br />
$newDateTime-&gt;format('H') != '00';<br />
<br />
Better use time too or erase the values later on:<br />
$newDateTime = DateTime::createFromFormat('Y-m-d h:i', '2014-12-10 00:00');<br />
or:<br />
$newDateTime = DateTime::createFromFormat(''Y-m-d', '2014-12-10');<br />
$newDateTime-&gt;setTime(0, 0);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116027""></a>
  <div class="note">
   <strong class="user">ELPI</strong>
   <a href="#116027" class="date">31-Oct-2014 07:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It can be confusing creating new DateTime from timestamp when your default timezone (date.timezone) is different from UTC and you are used to date()-function.<br />
<br />
date()-function automatically uses your current timezone setting but DateTime::createFromFormat (or DateTime constructor) does not (it ignores tz-parameter).<br />
<br />
You can get same results as date() by setting the timezone after object creation.<br />
<br />
<span class="default">&lt;?php<br />
$ts </span><span class="keyword">= </span><span class="default">1414706400</span><span class="keyword">;<br />
</span><span class="default">$date1 </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d H:i"</span><span class="keyword">, </span><span class="default">$ts</span><span class="keyword">);<br />
</span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"U"</span><span class="keyword">, </span><span class="default">$ts</span><span class="keyword">)-&gt;</span><span class="default">setTimeZone</span><span class="keyword">(new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="default">date_default_timezone_get</span><span class="keyword">()))-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d H:i"</span><span class="keyword">);<br />
</span><span class="comment">//$date1===$date2<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115270""></a>
  <div class="note">
   <strong class="user">nicodoggie at gmail dot com</strong>
   <a href="#115270" class="date">25-Jun-2014 10:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've found that on PHP 5.5.13 (not sure if it happens on other versions) if you enter a month larger than 12 on a format that takes numeric months, the result will be a DateTime object with its month equal to the number modulo 12 instead of returning false.<br />
<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(</span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2013-22-01'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
results in:<br />
class DateTime#4 (3) {<br />
&nbsp; public $date =&gt;<br />
&nbsp; string(19) "2014-10-01 13:05:05"<br />
&nbsp; public $timezone_type =&gt;<br />
&nbsp; int(3)<br />
&nbsp; public $timezone =&gt;<br />
&nbsp; string(3) "UTC"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114697""></a>
  <div class="note">
   <strong class="user">d dot shankarnarayana at gmail dot com</strong>
   <a href="#114697" class="date">25-Mar-2014 03:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Say if there is a string with&nbsp; $date = "today is 2014 January 1";&nbsp;&nbsp; and you need to extract "2014 January" using DateTime::createFromFormat().&nbsp; As you can see in the string there is something odd like "today is" .Since that string (today is) does not correspond to a date format, we need to escape that. <br />
<br />
In this case, each and every character on that string has to be escaped as shown below.<br />
<br />
The code.<br />
<br />
<span class="default">&lt;?php<br />
$paragraph </span><span class="keyword">= </span><span class="string">"today is 2014 January 1"</span><span class="keyword">;<br />
</span><span class="default">$date </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'\t\o\d\a\y \i\s Y F j'</span><span class="keyword">, </span><span class="default">$paragraph</span><span class="keyword">);<br />
echo </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y F'</span><span class="keyword">); </span><span class="comment">//"prints" 2014 January<br />
<br />
</span><span class="keyword">- </span><span class="default">Shankar Damodaran</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111123""></a>
  <div class="note">
   <strong class="user">mail at marcel-juenemann dot de</strong>
   <a href="#111123" class="date">18-Jan-2013 02:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the U option does not support negative timestamps (before 1970). You have to use date for that.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110385""></a>
  <div class="note">
   <strong class="user">falundir at gmail dot com</strong>
   <a href="#110385" class="date">17-Oct-2012 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be warned that DateTime object created without explicitely providing the time portion will have the current time set instead of 00:00:00.<br />
<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">)); </span><span class="comment">//will print 2012-10-17 13:57:34 (the current time)<br />
</span><span class="default">?&gt;<br />
</span><br />
That's also why you can't safely compare equality of such DateTime objects:<br />
<br />
<span class="default">&lt;?php<br />
$date1 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">sleep</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="string">'2012-10-17'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">== </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">&gt;= </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be false<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date1 </span><span class="keyword">&lt; </span><span class="default">$date2</span><span class="keyword">); </span><span class="comment">//will be true<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109881""></a>
  <div class="note">
   <strong class="user">thomas dot ribiere at allgoob dot com</strong>
   <a href="#109881" class="date">31-Aug-2012 12:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Not a bug, but a strange issue today 2012-08-30 :<br />
<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= </span><span class="string">"2011-02"</span><span class="keyword">;<br />
echo </span><span class="default">$date</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m"</span><span class="keyword">,</span><span class="default">$date</span><span class="keyword">);<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will display : <br />
2011-02<br />
2011-03<br />
<br />
It's because there is no 2011-02-30, so datetime will take march insteed of february ...<br />
<br />
To fix it :<br />
<span class="default">&lt;?php <br />
$date </span><span class="keyword">= </span><span class="string">"2011-02"</span><span class="keyword">;<br />
echo </span><span class="default">$date</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">,</span><span class="default">$date</span><span class="keyword">.</span><span class="string">"-01"</span><span class="keyword">);<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m"</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107452""></a>
  <div class="note">
   <strong class="user">kamil dot wegrzynowicz at baobaz dot com</strong>
   <a href="#107452" class="date">10-Feb-2012 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems that a pipe ('|') option in formating string works only with PHP version 5.3.7 and newer. We had an issue with it on versions 5.3.2, 5.3.3, 5.3.6. Yet it was fine with 5.3.8 and 5.3.10.
<br />

<br />
By short example:
<br />
<span class="default">&lt;?php
<br />
$timezone </span><span class="keyword">= new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">'UTC'</span><span class="keyword">);
<br />
</span><span class="default">$dateTime </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'dmY|'</span><span class="keyword">, </span><span class="string">'01011972'</span><span class="keyword">, </span><span class="default">$timezone</span><span class="keyword">);
<br />
</span><span class="comment">//$dateTime is FALSE in PHP v &lt;5.3.8
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Instead we used a workaround:
<br />
<span class="default">&lt;?php
<br />
$dateTime </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'dmY'</span><span class="keyword">, </span><span class="string">'01011972'</span><span class="keyword">, </span><span class="default">$timezone</span><span class="keyword">);
<br />
</span><span class="default">$dateTime</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d 00:00:00'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>which works fine.
<br />

<br />
====
<br />

<br />
Modified by admin to correct for version (5.3.7 not 5.3.8)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103158""></a>
  <div class="note">
   <strong class="user">Aurelien Marchand</strong>
   <a href="#103158" class="date">29-Mar-2011 04:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware specifying a timezone in the format as it will take precedence over the DateTimeZone object.<br />
<br />
<span class="default">&lt;?php<br />
$timezone </span><span class="keyword">= </span><span class="string">"UTC"</span><span class="keyword">; </span><span class="comment">// or any other valid name for a timezone<br />
</span><span class="default">$d</span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s T"</span><span class="keyword">,</span><span class="string">"2011-11-06 00:00:00 EDT"</span><span class="keyword">,new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="default">$timezone</span><span class="keyword">));<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s T - U"</span><span class="keyword">);<br />
</span><span class="comment">// returns "2011-11-06 00:00:00 EDT - 1320552000"<br />
// specifying $timezone = "Pacific/Honolulu"; would return the same string<br />
</span><span class="default">?&gt;<br />
</span><br />
This gets hairy when you are playing with transition from summer time to winter time! For instance, in Toronto, the time change happens on 2011-11-06. One second after 01:59:59 (EDT), the time becomes 01:00:00 (EST), or 1320559200 in Unix timestamp.<br />
<br />
However, notice the following:<br />
<span class="default">&lt;?php<br />
$d </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s"</span><span class="keyword">,</span><span class="string">"2011-11-06 01:00:00"</span><span class="keyword">,new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">"EST"</span><span class="keyword">));<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s T U"</span><span class="keyword">);<br />
</span><span class="comment">// returns "2011-11-06 01:00:00 EDT 1320555600" instead of "2011-11-06 01:00:00 EST 1320559200"<br />
<br />
// so the correct way is to do:<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s T"</span><span class="keyword">,</span><span class="string">"2011-11-06 01:00:00 EST"</span><span class="keyword">,new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="default">$timezone</span><span class="keyword">)); </span><span class="comment">// set $timezone to any valid string for DateTimeZone, it doesn't matter<br />
</span><span class="keyword">echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s T U"</span><span class="keyword">);<br />
</span><span class="comment">// returns "2011-11-06 01:00:00 EST - 1320559200" as wanted<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102910""></a>
  <div class="note">
   <strong class="user">klugg at tlen dot pl</strong>
   <a href="#102910" class="date">14-Mar-2011 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In order to use a DateTimeZone, don't enter one of the DateTimeZone::Europe, DateTimeZone::Asia etc. constants, but create a DateTimeZone object with verbal timezone name passed as a string:<br />
<span class="default">&lt;?php<br />
$eventDate </span><span class="keyword">= </span><span class="default">DateTime</span><span class="keyword">::</span><span class="default">createFromFormat</span><span class="keyword">(</span><span class="string">'m/d/y h:i'</span><span class="keyword">, </span><span class="string">'02/26/11 08:00'</span><span class="keyword">, new </span><span class="default">DateTimeZone</span><span class="keyword">(</span><span class="string">'Europe/Warsaw'</span><span class="keyword">));<br />
echo </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$eventDate</span><span class="keyword">, </span><span class="string">'Y-m-d'</span><span class="keyword">); </span><span class="comment">//prints "2011-02-26"<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="datetime.construct.html">DateTime::__construct</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="datetime.getlasterrors.html">DateTime::getLastErrors</a></div>
 <div class="up"><a href="class.datetime.html">DateTime</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
