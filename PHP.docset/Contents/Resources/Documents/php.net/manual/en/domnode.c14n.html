<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>ノードを文字列に正規化する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="domnode.appendchild.html">DOMNode::appendChild</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="domnode.c14nfile.html">DOMNode::C14NFile</a></div>
 <div class="up"><a href="class.domnode.html">DOMNode</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="domnode.c14n" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DOMNode::C14N</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0, PHP 7)</p><p class="refpurpose"><span class="refname">DOMNode::C14N</span> &mdash; <span class="dc-title">ノードを文字列に正規化する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-domnode.c14n-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><strong>DOMNode::C14N</strong></span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$exclusive</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$with_comments</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$xpath</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$ns_prefixes</code></span>
  ]]]] )</div>

  <p class="para rdfs-comment">
   ノードを文字列に正規化します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-domnode.c14n-parameters">
  <h3 class="title">パラメータ</h3>
  <dl>

   
    <dt>
<code class="parameter">exclusive</code></dt>

    <dd>

     <p class="para">
      指定した xpath あるいは名前空間プレフィックスにマッチするノードだけを対象としたパースを有効にする。
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">with_comments</code></dt>

    <dd>

     <p class="para">
      コメントを残して出力する。
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">xpath</code></dt>

    <dd>

     <p class="para">
      ノードを絞り込むための <em>xpath</em> の配列。
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">ns_prefixes</code></dt>

    <dd>

     <p class="para">
      ノードを絞り込むための名前空間プレフィックスの配列。
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-domnode.c14n-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   正規化したノードを文字列で返します。
   失敗した場合に <strong><code>FALSE</code></strong> を返します
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-domnode.c14n-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="methodname"><a href="domnode.c14nfile.html" class="methodname" rel="rdfs-seeAlso">DOMNode::C14NFile()</a> - ノードをファイルに正規化する</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="118732""></a>
  <div class="note">
   <strong class="user">lordbaco</strong>
   <a href="#118732" class="date">28-Jan-2016 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Good to know:<br />
<br />
&lt;&lt; Due to a known issue in XML canonicalization in PHP, processing large metadata files in SimpleSAMLphp takes a big amount of resources, with that amount growing approximately by the square of the number of entities in the metadata set &gt;&gt;<br />
https://simplesamlphp.org/metaprocessing<br />
<br />
&lt;&lt; The C14N() function appears to have a runtime that is O(N^2) (or possibly worse?) depending on input size, which means that it becomes very slow as the input grows. For example, an input with around 196000 nodes takes about 290 seconds, while an input with 486000 nodes takes 2200 seconds. &gt;&gt;<br />
https://bugs.php.net/bug.php?id=53655<br />
<br />
We had the same issue with a 4.1 MB XML (105k lines). The sample code of ticket&nbsp; #53655 takes 1h36 minute to canonicalize it!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116871""></a>
  <div class="note">
   <strong class="user">jorda at edpsciences dot org</strong>
   <a href="#116871" class="date">13-Mar-2015 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
C14N() returns an empty string if the node is not included in the document tree:<br />
<span class="default">&lt;?php<br />
$d </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">);<br />
</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="string">'&lt;foo&gt;&lt;/foo&gt;'</span><span class="keyword">);<br />
</span><span class="default">$n </span><span class="keyword">= </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">'bar'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">-&gt;</span><span class="default">C14N</span><span class="keyword">());<br />
</span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">-&gt;</span><span class="default">C14N</span><span class="keyword">());<br />
</span><span class="default">?&gt;<br />
</span>output:<br />
string(0) ""<br />
string(11) "&lt;bar&gt;&lt;/bar&gt;"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111773""></a>
  <div class="note">
   <strong class="user">Rijk</strong>
   <a href="#111773" class="date">27-Mar-2013 06:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When working with (malformed) HTML, you're probably better off using DOMDocument's saveHTML() method instead. C14N() will attempt to make your HTML valid XML, for example by converting &lt;br&gt; to &lt;br&gt;&lt;/br&gt;.<br />
<br />
So instead of:<br />
$html = $Node-&gt;C14N();<br />
<br />
Use:<br />
$html = $Node-&gt;ownerDocument-&gt;saveHTML( $Node );</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="domnode.appendchild.html">DOMNode::appendChild</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="domnode.c14nfile.html">DOMNode::C14NFile</a></div>
 <div class="up"><a href="class.domnode.html">DOMNode</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
