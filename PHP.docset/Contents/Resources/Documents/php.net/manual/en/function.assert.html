<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>assertion が FALSE であるかどうかを調べる</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.assert-options.html">assert_options</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.cli-get-process-title.html">cli_get_process_title</a></div>
 <div class="up"><a href="ref.info.html">PHP オプション/情報 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.assert" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">assert</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">assert</span> &mdash; <span class="dc-title">assertion が <strong><code>FALSE</code></strong> であるかどうかを調べる</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.assert-description">
  <h3 class="title">説明</h3>
  <p class="para">PHP 5 および PHP 7</p>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>assert</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$assertion</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$description</code></span>
  ] )</div>

  <p class="para rdfs-comment">PHP 7</p>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>assert</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$assertion</code></span>
   [, <span class="methodparam"><span class="type"><a href="class.throwable.html" class="type Throwable">Throwable</a></span> <code class="parameter">$exception</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>assert()</strong></span> は、指定した
   <code class="parameter">assertion</code> を調べて、結果が
   <strong><code>FALSE</code></strong> の場合に適切な動作をします。
  </p>
  <div class="refsect2 unknown-descriptioo" id="refsect2-function.assert-unknown-descriptioo">
   <h4 class="title">従来のアサーション (PHP 5 および 7)</h4>
   <p class="para">
    <code class="parameter">assertion</code> が文字列として指定された場合、
    <span class="function"><strong>assert()</strong></span>によりPHPコードとして評価されます。
    もし論理型の条件を <code class="parameter">assertion</code> として渡した場合、
    <span class="function"><a href="function.assert-options.html" class="function">assert_options()</a></span> 関数で定義したであろう
    アサーション関数への引数として表示されません。
    その条件はハンドラ関数をコールする前に文字列に変換され、論理型の
    <strong><code>FALSE</code></strong> は空文字列に変換されます。
   </p>
   <p class="para">
    assertion は、デバッグ目的にのみ使用するべきです。
    assertion を常に<strong><code>TRUE</code></strong>となる条件を調べる不具合診断に使用し、<strong><code>TRUE</code></strong>
    でない場合に何らかのプログラミングエラーを示したり、extension
    関数または特定のシステム制限や機能といった、
    特定の機能の存在をチェックするために使用することが可能です。
   </p>
   <p class="para">
    assersion は、入力パラメータのチェックのような通常の実行動作に
    使用するべきではありません。一般的には、assertion のチェックを無効にしても
    そのコードが正常に動作しなければなりません。
   </p>
   <p class="para">
    <span class="function"><strong>assert()</strong></span> の動作は、
    <span class="function"><a href="function.assert-options.html" class="function">assert_options()</a></span> またはマニュアルの関数の部分
    に記述された .ini の設定により設定することが可能です。
   </p>
   <p class="para">
    関数 <span class="function"><a href="function.assert-options.html" class="function">assert_options()</a></span> や
    <strong><code>ASSERT_CALLBACK</code></strong> 設定ディレクティブにより失敗した assertion
    を処理するコールバック関数を設定することが可能です。
   </p>
   <p class="para">
    <span class="function"><strong>assert()</strong></span> のコールバックは、assertion
    が発生した場所に関する情報と共に assertion
    に渡されたコードを容易にキャプチャーできるため、
    特に自動テストセットを構築する際に便利です。
    この情報は他の手法でもキャプチャー可能ですが、assertion
    を使用することにより、より簡単かつ容易に行なうことが可能です!
   </p>
   <p class="para">
    コールバック関数は、3つの引数を受ける必要があります。最初の引数は、
    assertionが失敗したファイルが含まれます。2番目の引数には、
    assertionが失敗した行が含まれ、3番目の引数には失敗した式が含まれます
    (もしある場合のみ。1 または &quot;two&quot; のようなリテラルの値は、
    この引数に渡されません)。
    PHP 5.4.8 以降では、オプションの4番目の引数を指定できます。これを設定すると、
    <code class="parameter">description</code> を <span class="function"><strong>assert()</strong></span>
    に渡せるようになります。
   </p>
  </div>

  <div class="refsect2 unknown-unknown-descriptiop" id="function.assert.expectations">
   <h4 class="title">Expectation (PHP 7 のみ)</h4>
   <p class="para">
    <span class="function"><strong>assert()</strong></span> は PHP 7 で言語構造となり、expectation の定義を満たすようになりました。
    すなわち、開発環境やテスト環境では有効であるが、運用環境では除去されて、まったくコストのかからないアサーションということです。
   </p>
   <p class="para">
    下位互換性を保つために、<span class="function"><a href="function.assert-options.html" class="function">assert_options()</a></span> でこれらの挙動を制御することもできますが、
    PHP 7 以降でしか使わないコードでは、新たに導入された二つの設定ディレクティブを使って
    <span class="function"><strong>assert()</strong></span> の挙動を制御しましょう。
    そして <span class="function"><a href="function.assert-options.html" class="function">assert_options()</a></span> は使わないようにしましょう。
   </p>
   <table class="doctable table">
    <caption><strong>
     PHP 7 における <span class="function"><strong>assert()</strong></span> 用の設定ディレクティブ
    </strong></caption>
    
     <thead>
      <tr>
       <th>ディレクティブ</th>
       <th>デフォルト値</th>
       <th>取り得る値</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>
        <a href="ini.core.html#ini.zend.assertions" class="link">zend.assertions</a>
       </td>
       <td><em>1</em></td>
       <td>
        <ul class="simplelist">
         <li class="member">
          <em>1</em>: コードを生成して実行する (開発モード)
         </li>
         <li class="member">
          
          <em>0</em>: コードを生成するが、実行時には読み飛ばす
         </li>
         <li class="member">
          <em>-1</em>: コードを生成しない (運用モード)
         </li>
        </ul>
       </td>
      </tr>

      <tr>
       <td>
        <a href="info.configuration.html#ini.assert.exception" class="link">assert.exception</a>
       </td>
       <td><em>0</em></td>
       <td>
        <ul class="simplelist">
         <li class="member">
          <em>1</em>: アサーションに失敗した場合には、
          <code class="parameter">exception</code> で指定したオブジェクトをスローするか、
          <code class="parameter">exception</code> を指定していない場合は
          <a href="class.assertionerror.html" class="classname">AssertionError</a> オブジェクトをスローします。
         </li>
         <li class="member">
          <em>0</em>: 先述の
          <a href="class.throwable.html" class="classname">Throwable</a> を使ったり生成したりしますが、
          そのオブジェクト上で警告を生成するだけであり、スローしません
          (PHP 5 と互換性のある挙動です)。
         </li>
        </ul>
       </td>
      </tr>

     </tbody>
    
   </table>

  </div>

 </div>


 <div class="refsect1 parameters" id="refsect1-function.assert-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">assertion</code></dt>

     <dd>

      <p class="para">
       アサーション。
       PHP 5 では、評価対象の文字列か、あるいは
       <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span> 値しか指定できませんでした。
       PHP 7 ではそれ以外にも、値を返すあらゆる式を指定できます。
       この式を実行した結果を用いて、アサーションに成功したか否かを判断します。
      </p>

      <div class="warning"><strong class="warning">警告</strong>
       
       <p class="para">
        Using <span class="type"><a href="language.types.string.html" class="type string">string</a></span> as the <code class="parameter">assertion</code> is
        <em class="emphasis">DEPRECATED</em> as of PHP 7.2.
       </p>
      </div>
     </dd>

    
    
     <dt>
<code class="parameter">description</code></dt>

     <dd>

      <p class="para">
       オプションの説明で、
       <code class="parameter">assertion</code> が失敗したときのメッセージにこれを含めます。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">exception</code></dt>

     <dd>

      <p class="para">
       PHP 7 では、第二パラメータに、文字列だけではなく
       <a href="class.throwable.html" class="classname">Throwable</a> オブジェクトを指定できるようになりました。
       これを指定した場合は、
       <a href="info.configuration.html#ini.assert.exception" class="link">assert.exception</a> が有効で
       かつアサーションに失敗した場合に、そのオブジェクトをスローします。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.assert-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   アサーションが false となった場合に <strong><code>FALSE</code></strong>、それ以外の場合に <strong><code>TRUE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.assert-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
       <tr>
       <td>7.2.0</td>
       <td>
        
        Usage of a <span class="type"><a href="language.types.string.html" class="type string">string</a></span> as the <code class="parameter">assertion</code>
        became deprecated. It now emits an <strong><code>E_DEPRECATED</code></strong>
        notice when both <a href="info.configuration.html#ini.assert.active" class="link">assert.active</a>
        and <a href="ini.core.html#ini.zend.assertions" class="link">zend.assertions</a> are set
        to <em>1</em>.
       </td>
      </tr>

      <tr>
       <td>7.0.0</td>
       <td>
        <span class="function"><strong>assert()</strong></span> が言語構造となり、関数ではなくなりました。
        <code class="parameter">assertion</code> に式を指定できるようになりました。
        第二パラメータは、
        <code class="parameter">exception</code> (<a href="class.throwable.html" class="classname">Throwable</a> オブジェクトを渡した場合)
        あるいは
        <code class="parameter">description</code> (PHP 5.4.8 以降でサポートされていたもの)
        のいずれかであると解釈されるようになりました。
       </td>
      </tr>

      <tr>
       <td>5.4.8</td>
       <td>
        <code class="parameter">description</code> パラメータが追加されました。
        <code class="parameter">description</code> はまた、
        <strong><code>ASSERT_CALLBACK</code></strong> モードのコールバック関数の4番目の引数にも指定できるようになりました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.assert-examples">
  <h3 class="title">例</h3>
  <div class="refsect2 unknown-examplet" id="refsect2-function.assert-unknown-examplet">
   <h4 class="title">従来のアサーション (PHP 5 および 7)</h4>
   <p class="para">
    <div class="example" id="example-520">
     <p><strong>例1 失敗した assertion をカスタムハンドラで処理する</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;assertを有効にし、出力を抑制する<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_ACTIVE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_WARNING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_QUIET_EVAL</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;ハンドラ関数を作成する<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">my_assert_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$code</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;hr&gt;Assertion&nbsp;Failed:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;'</span><span style="color: #0000BB">$file</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Line&nbsp;'</span><span style="color: #0000BB">$line</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Code&nbsp;'</span><span style="color: #0000BB">$code</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;&lt;hr&nbsp;/&gt;"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;コールバックを設定する<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_CALLBACK</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_assert_handler'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;失敗するassertionを作成<br /></span><span style="color: #0000BB">assert</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysql_query("")'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    <div class="example" id="example-521">
     <p><strong>例2 カスタムハンドラを使った説明の表示</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;assertを有効にし、出力を抑制する<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_ACTIVE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_WARNING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_QUIET_EVAL</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;ハンドラ関数を作成する<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">my_assert_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$code</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$desc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Assertion&nbsp;failed&nbsp;at&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #DD0000">:</span><span style="color: #0000BB">$line</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$code</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$desc</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">":&nbsp;</span><span style="color: #0000BB">$desc</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;コールバックを設定する<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_CALLBACK</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_assert_handler'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;失敗するassertionを作成<br /></span><span style="color: #0000BB">assert</span><span style="color: #007700">(</span><span style="color: #DD0000">'2&nbsp;&lt;&nbsp;1'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">assert</span><span style="color: #007700">(</span><span style="color: #DD0000">'2&nbsp;&lt;&nbsp;1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Two&nbsp;is&nbsp;less&nbsp;than&nbsp;one'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
     <div class="example-contents screen">
 <div class="cdata"><pre>
 Assertion failed at test.php:21: 2 &lt; 1
 Assertion failed at test.php:22: 2 &lt; 1: Two is less than one
 </pre></div>
     </div>
    </div>
   </p>
  </div>

  <div class="refsect2 unknown-unknown-exampleu" id="refsect2-function.assert-unknown-unknown-exampleu">
   <h4 class="title">Expectation (PHP 7 のみ)</h4>
   <div class="example" id="example-522">
    <p><strong>例3 自作の例外を指定しない expectation</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />assert</span><span style="color: #007700">(</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">'Hi!'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     <a href="ini.core.html#ini.zend.assertions" class="link">zend.assertions</a> が 0
     の場合は、上の例の結果は次のようになります。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Hi!
</pre></div>
    </div>
    <div class="example-contents"><p>
     <a href="ini.core.html#ini.zend.assertions" class="link">zend.assertions</a> が 1、かつ
     <a href="info.configuration.html#ini.assert.exception" class="link">assert.exception</a> が 0
     の場合は、上の例の結果は次のようになります。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Warning: assert(): assert(true == false) failed in - on line 2
Hi!
</pre></div>
    </div>
    <div class="example-contents"><p>
     <a href="ini.core.html#ini.zend.assertions" class="link">zend.assertions</a> が 1、かつ
     <a href="info.configuration.html#ini.assert.exception" class="link">assert.exception</a> が 1
     の場合は、上の例の結果は次のようになります。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Fatal error: Uncaught AssertionError: assert(true == false) in -:2
Stack trace:
#0 -(2): assert(false, &#039;assert(true == ...&#039;)
#1 {main}
  thrown in - on line 2
</pre></div>
    </div>
   </div>
   <div class="example" id="example-523">
    <p><strong>例4 自作の例外を用いた expectation</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">CustomError&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">AssertionError&nbsp;</span><span style="color: #007700">{}<br /><br /></span><span style="color: #0000BB">assert</span><span style="color: #007700">(</span><span style="color: #0000BB">true&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&nbsp;new&nbsp;</span><span style="color: #0000BB">CustomError</span><span style="color: #007700">(</span><span style="color: #DD0000">'True&nbsp;is&nbsp;not&nbsp;false!'</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #DD0000">'Hi!'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     <a href="ini.core.html#ini.zend.assertions" class="link">zend.assertions</a> が 0
     の場合は、上の例の結果は次のようになります。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Hi!
</pre></div>
    </div>
    <div class="example-contents"><p>
     <a href="ini.core.html#ini.zend.assertions" class="link">zend.assertions</a> が 1、かつ
     <a href="info.configuration.html#ini.assert.exception" class="link">assert.exception</a> が 0
     の場合は、上の例の結果は次のようになります。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Warning: assert(): CustomError: True is not false! in -:4
Stack trace:
#0 {main} failed in - on line 4
Hi!
</pre></div>
    </div>
    <div class="example-contents"><p>
     <a href="ini.core.html#ini.zend.assertions" class="link">zend.assertions</a> が 1、かつ
     <a href="info.configuration.html#ini.assert.exception" class="link">assert.exception</a> が 1
     の場合は、上の例の結果は次のようになります。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Fatal error: Uncaught CustomError: True is not false! in -:4
Stack trace:
#0 {main}
  thrown in - on line 4
</pre></div>
    </div>
   </div>
  </div>

 </div>


 <div class="refsect1 seealso" id="refsect1-function.assert-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.assert-options.html" class="function" rel="rdfs-seeAlso">assert_options()</a> - 様々な assert フラグを設定/取得する</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119790""></a>
  <div class="note">
   <strong class="user">Ben</strong>
   <a href="#119790" class="date">26-Aug-2016 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if there was no 'warning' message when assertion failed (FALSE), try reset the error handler:<br />
<span class="default">&lt;?php<br />
set_error_handler </span><span class="keyword">( </span><span class="default">null </span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113276""></a>
  <div class="note">
   <strong class="user">office dot stojmenovic at gmail dot com</strong>
   <a href="#113276" class="date">20-Sep-2013 09:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example from Ikac Framework how they use assert()<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Set Assertion Debug<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * This method will check the given assertion and take appropriate -<br />
&nbsp;&nbsp; &nbsp; * action if its result is FALSE. <br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * This file is part of Ikac Framework.<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * @package Ikac Framework<br />
&nbsp;&nbsp; &nbsp; * @author Ivan Stojmenovic Ikac &lt;contact.@stojmenovic.info&gt;<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * @param mixed $assertion&nbsp; The assertion.<br />
&nbsp;&nbsp; &nbsp; * @param mixed $callback Callback to call on failed assertions<br />
&nbsp;&nbsp; &nbsp; * @param array $options&nbsp; Set the various control options or just query their current settings. <br />
&nbsp;&nbsp; &nbsp; * @param string $description&nbsp; An optional description that will be included in the failure message if the assertion fails. <br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">setAssertionDebug</span><span class="keyword">(</span><span class="default">$assertion</span><span class="keyword">, </span><span class="default">$callback</span><span class="keyword">, array </span><span class="default">$options</span><span class="keyword">, </span><span class="default">$description </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$options</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$options </span><span class="keyword">AS </span><span class="default">$option </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">assert_options</span><span class="keyword">(</span><span class="default">$option</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$callback</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">assert_options</span><span class="keyword">(</span><span class="default">ASSERT_CALLBACK</span><span class="keyword">, </span><span class="default">$callback</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">assert</span><span class="keyword">(</span><span class="default">$assertion</span><span class="keyword">, </span><span class="default">$description</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;<br />
</span><br />
How to use:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">use </span><span class="default">Ikac</span><span class="keyword">\</span><span class="default">Component</span><span class="keyword">\</span><span class="default">SystemBehaviour</span><span class="keyword">\</span><span class="default">OptionsInfo</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$system </span><span class="keyword">= new </span><span class="default">OptionsInfo</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$option </span><span class="keyword">= array(</span><span class="default">ASSERT_ACTIVE </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,</span><span class="default">ASSERT_WARNING </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,</span><span class="default">ASSERT_QUIET_EVAL </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$system</span><span class="keyword">-&gt;</span><span class="default">setAssertionDebug</span><span class="keyword">(</span><span class="string">'2&lt;1'</span><span class="keyword">, function(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"Assertion failed"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; }, </span><span class="default">$option</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98521""></a>
  <div class="note">
   <strong class="user">uramihsayibok, gmail, com</strong>
   <a href="#98521" class="date">20-Jun-2010 10:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There's a nice advantage to giving assert() some code to execute, as a string, rather than a simple true/false value: commenting.<br />
<br />
<span class="default">&lt;?php<br />
<br />
assert</span><span class="keyword">(</span><span class="string">'is_int($int) /* $int parameter must be an int, not just numeric */'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// and my personal favorite<br />
</span><span class="default">assert</span><span class="keyword">(</span><span class="string">'false /* not yet implemented */'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The comment will show up in the output (or in your assertion handler) and doesn't require someone debugging to go through your code trying to figure out why the assertion happened. That's no excuse to not comment your code, of course.<br />
<br />
You need to use a block comment (/*...*/) because a line comment (//...) creates an "unexpected $end" parse error in the evaluated code. Bug? Could be.<br />
(You can get around it with "false // not yet implemented\n" but that screws up the message)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84760""></a>
  <div class="note">
   <strong class="user">hodgman at ali dot com dot au</strong>
   <a href="#84760" class="date">29-Jul-2008 06:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As noted on Wikipedia - "assertions are primarily a development tool, they are often disabled when a program is released to the public." and "Assertions should be used to document logically impossible situations and discover programming errors&mdash; if the 'impossible' occurs, then something fundamental is clearly wrong. This is distinct from error handling: most error conditions are possible, although some may be extremely unlikely to occur in practice. Using assertions as a general-purpose error handling mechanism is usually unwise: assertions do not allow for graceful recovery from errors, and an assertion failure will often halt the program's execution abruptly. Assertions also do not display a user-friendly error message."<br />
<br />
This means that the advice given by "gk at proliberty dot com" to force assertions to be enabled, even when they have been disabled manually, goes against best practices of only using them as a development tool.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78176""></a>
  <div class="note">
   <strong class="user">Krzysztof &amp;#39;ChanibaL&amp;#39; Bociurko</strong>
   <a href="#78176" class="date">02-Oct-2007 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that func_get_args() should be used carefully and never in a string! For example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">asserted_normal</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">assert</span><span class="keyword">(</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">()));<br />
&nbsp;&nbsp;&nbsp; }<br />
function </span><span class="default">asserted_string</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">assert</span><span class="keyword">(</span><span class="string">'var_dump(func_get_args())'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php asserted_normal</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">) </span><span class="default">?&gt;</span> prints<br />
array(2) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; int(1)<br />
&nbsp; [1]=&gt;<br />
&nbsp; int(2)<br />
}<br />
<br />
but <span class="default">&lt;?php asserted_string</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">) </span><span class="default">?&gt;</span> prints<br />
array(1) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(25) "var_dump(func_get_args())"<br />
}<br />
<br />
This is because of that the string passed to assert() is being evaled inside assert, and not your function. Also, note that this works correctly, because of the eval scope:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">asserted_evaled_string</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">assert</span><span class="keyword">(eval(</span><span class="string">'var_dump(func_get_args())'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">asserted_evaled_string</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>array(2) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; int(5)<br />
&nbsp; [1]=&gt;<br />
&nbsp; int(6)<br />
}<br />
<br />
(oh, and for simplicity's sake the evaled code doesn't return true, so&nbsp; don't worry that it fails assertion...)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69647""></a>
  <div class="note">
   <strong class="user">mail&lt;at&gt;aaron-mueller.de</strong>
   <a href="#69647" class="date">13-Sep-2006 07:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a simple demonstration of Design By Contract with PHP<br />
<br />
<span class="default">&lt;?php<br />
<br />
assert_options</span><span class="keyword">(</span><span class="default">ASSERT_ACTIVE</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">assert_options</span><span class="keyword">(</span><span class="default">ASSERT_WARNING</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">assert_options</span><span class="keyword">(</span><span class="default">ASSERT_BAIL</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">assert_options</span><span class="keyword">(</span><span class="default">ASSERT_CALLBACK</span><span class="keyword">, </span><span class="string">'dcb_callback'</span><span class="keyword">);<br />
<br />
function </span><span class="default">dcb_callback</span><span class="keyword">(</span><span class="default">$script</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">$message</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;h1&gt;Condition failed!&lt;/h1&gt;&lt;br /&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Script: &lt;strong&gt;</span><span class="default">$script</span><span class="string">&lt;/strong&gt;&lt;br /&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Line: &lt;strong&gt;</span><span class="default">$line</span><span class="string">&lt;/strong&gt;&lt;br /&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Condition: &lt;br /&gt;&lt;pre&gt;</span><span class="default">$message</span><span class="string">&lt;/pre&gt;"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Parameters<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="string">'Simple DCB with PHP'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Pre-Condition<br />
</span><span class="default">assert</span><span class="keyword">(</span><span class="string">'<br />
&nbsp;&nbsp;&nbsp; is_integer($a) &amp;&amp;<br />
&nbsp;&nbsp;&nbsp; ($a &gt; 0) &amp;&amp;<br />
&nbsp;&nbsp;&nbsp; ($a &lt; 20) &amp;&amp;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; is_string($b) &amp;&amp;<br />
&nbsp;&nbsp;&nbsp; (strlen($b) &gt; 5);<br />
'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Function<br />
</span><span class="keyword">function </span><span class="default">combine</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"Kombined: " </span><span class="keyword">. </span><span class="default">$b </span><span class="keyword">. </span><span class="default">$a</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">combine</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Post-Condition<br />
</span><span class="default">assert</span><span class="keyword">(</span><span class="string">'<br />
&nbsp;&nbsp;&nbsp; is_string($result) &amp;&amp;<br />
&nbsp;&nbsp;&nbsp; (strlen($result) &gt; 0);<br />
'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// All right, the Function works fine<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.assert-options.html">assert_options</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.cli-get-process-title.html">cli_get_process_title</a></div>
 <div class="up"><a href="ref.info.html">PHP オプション/情報 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
